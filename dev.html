<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Chromeleon - Development Environment</title>
	<link rel="stylesheet" href="/src/index.css">
</head>
<body class="m-0 p-3 sm:p-4 md:p-5 font-sans bg-gray-100">
	<div class="bg-indigo-600 text-white p-4 text-base font-medium mb-5 rounded-lg">
		üîß Chromeleon Development Environment - Live Preview & Testing
	</div>
	
	<div class="grid grid-cols-1 gap-5 items-start 2xl:grid-cols-[400px_1fr]">
		<!-- Popup Preview -->
		<div class="bg-white rounded-lg shadow-lg overflow-hidden min-h-[400px] max-h-[500px] xl:min-h-[500px] xl:max-h-[600px]">
			<div class="bg-gray-100 p-3 text-sm font-medium border-b border-gray-200">üì± Extension Popup Preview</div>
			<div id="popup-root"></div>
		</div>
		
		<!-- Sample Webpage -->
		<div class="bg-white rounded-lg shadow-lg p-3 sm:p-4 md:p-5 min-h-[600px]">
			<div class="bg-gray-100 p-3 text-sm font-medium border-b border-gray-200 -m-3 sm:-m-4 md:-m-5 mb-5 rounded-t-lg">üåê Sample Webpage (Test Extension Theming)</div>
			<div class="grid gap-3 sm:gap-4 md:gap-5">
				<div class="border border-gray-200 rounded-md p-3 sm:p-4">
					<h3 class="m-0 mb-3 text-gray-700">Buttons</h3>
					<div class="flex gap-2 sm:gap-3 flex-wrap">
						<button class="px-3 py-2 text-sm sm:px-4 sm:text-base bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors">Default Button</button>
						<button class="px-3 py-2 text-sm sm:px-4 sm:text-base bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors">Primary Button</button>
						<button class="px-3 py-2 text-sm sm:px-4 sm:text-base bg-green-500 text-white rounded hover:bg-green-600 transition-colors">Success Button</button>
						<button class="px-3 py-2 text-sm sm:px-4 sm:text-base bg-yellow-500 text-white rounded hover:bg-yellow-600 transition-colors">Warning Button</button>
						<button class="px-3 py-2 text-sm sm:px-4 sm:text-base bg-red-500 text-white rounded hover:bg-red-600 transition-colors">Error Button</button>
					</div>
				</div>
				
				<div class="border border-gray-200 rounded-md p-3 sm:p-4">
					<h3 class="m-0 mb-3 text-gray-700">Form Elements</h3>
					<div class="mb-4">
						<label class="block mb-2 font-medium text-sm sm:text-base">Text Input</label>
						<input type="text" placeholder="Enter some text..." class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
					</div>
					<div class="mb-4">
						<label class="block mb-2 font-medium text-sm sm:text-base">Select Dropdown</label>
						<select class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
							<option>Option 1</option>
							<option>Option 2</option>
							<option>Option 3</option>
						</select>
					</div>
					<div class="mb-4">
						<label class="block mb-2 font-medium text-sm sm:text-base">Textarea</label>
						<textarea rows="3" placeholder="Enter a longer message..." class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
					</div>
				</div>
				
				<div class="border border-gray-200 rounded-md p-3 sm:p-4">
					<h3 class="m-0 mb-3 text-gray-700">Badges & Tags</h3>
					<div class="flex gap-2 flex-wrap">
						<span class="px-2 py-1 bg-blue-500 text-white rounded text-xs font-medium">Primary</span>
						<span class="px-2 py-1 bg-gray-500 text-white rounded text-xs font-medium">Secondary</span>
						<span class="px-2 py-1 bg-green-500 text-white rounded text-xs font-medium">Success</span>
						<span class="px-2 py-1 bg-yellow-500 text-white rounded text-xs font-medium">Warning</span>
						<span class="px-2 py-1 bg-red-500 text-white rounded text-xs font-medium">Error</span>
					</div>
				</div>
				
				<div class="border border-gray-200 rounded-md p-3 sm:p-4">
					<h3 class="m-0 mb-3 text-gray-700">Typography</h3>
					<h1 class="text-2xl sm:text-3xl font-bold mb-2">Heading 1</h1>
					<h2 class="text-xl sm:text-2xl font-semibold mb-2">Heading 2</h2>
					<h3 class="text-lg sm:text-xl font-medium mb-2">Heading 3</h3>
					<p class="mb-3 text-sm sm:text-base">This is a paragraph with some <strong>bold text</strong> and <em>italic text</em>. It demonstrates how the extension will affect typography on websites.</p>
					<a href="#" class="text-blue-500 hover:text-blue-600 transition-colors">This is a link</a>
				</div>
				
				<div class="border border-gray-200 rounded-md p-3 sm:p-4">
					<h3 class="m-0 mb-3 text-gray-700">Navigation</h3>
					<nav class="flex gap-3 sm:gap-5 py-3 border-b border-gray-200 flex-wrap">
						<a href="#" class="text-gray-700 font-medium hover:text-gray-900 transition-colors text-sm sm:text-base">Home</a>
						<a href="#" class="text-gray-700 font-medium hover:text-gray-900 transition-colors text-sm sm:text-base">About</a>
						<a href="#" class="text-gray-700 font-medium hover:text-gray-900 transition-colors text-sm sm:text-base">Services</a>
						<a href="#" class="text-gray-700 font-medium hover:text-gray-900 transition-colors text-sm sm:text-base">Contact</a>
					</nav>
				</div>
			</div>
		</div>
	</div>
	
	<script type="module" src="/src/popup/popup.tsx"></script>
	<script type="module" src="/src/dev-content.ts"></script>
	<script>
		// Mock Chrome extension APIs for development
		if (!window.chrome) {
			window.chrome = {
				storage: {
					sync: {
						get: (keys) => {
							console.log('Mock chrome.storage.sync.get:', keys);
							// Return default values for development
							const defaults = {
								extensionEnabled: true,
								themeSettings: {
									aggressiveMode: false,
									daisyTheme: 'dark'
								}
							};
							return Promise.resolve(defaults);
						},
						set: (data) => {
							console.log('Mock chrome.storage.sync.set:', data);
							return Promise.resolve();
						}
					}
				},
				tabs: {
					query: () => Promise.resolve([{ id: 1 }]),
					sendMessage: () => Promise.resolve()
				},
				runtime: {
					sendMessage: (message) => {
						console.log('Mock chrome.runtime.sendMessage:', message);
						
						// Forward theme updates to the development content script
						if (message.target === 'content-script' && message.data) {
							if (message.data.type === 'UPDATE_THEME') {
								window.postMessage({
									type: 'DEV_THEME_UPDATE',
									theme: message.data.settings.daisyTheme,
									enabled: true
								}, '*');
							} else if (message.data.type === 'TOGGLE_EXTENSION') {
								window.postMessage({
									type: 'DEV_THEME_UPDATE',
									theme: 'dark', // Default theme when toggling
									enabled: message.data.enabled
								}, '*');
							}
						}
						
						return Promise.resolve();
					}
				}
			};
		}
		
		// Add development info
		console.log('üöÄ Chromeleon Development Environment Loaded');
		console.log('üì± Popup preview available on the left');
		console.log('üåê Sample webpage available on the right for testing theming');
		console.log('üîß Chrome APIs are mocked for development');
	</script>
</body>
</html> 